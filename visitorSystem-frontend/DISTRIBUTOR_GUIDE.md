# 分判商工人管理系统使用指南

## 功能概述

分判商工人管理系统为每个分判商提供了独立的工人信息管理功能。分判商可以登录系统后管理自己下属的工人信息。

## 系统架构

### 1. 统一登录系统
- **登录地址**: `/login` - 所有用户（管理员、分判商）的统一登录入口
- **角色选择**: 登录时选择对应的角色类型

### 2. 分判商功能模块
- **工人信息管理**: 添加、编辑、删除、导入导出工人信息
- **数据统计**: 显示工人总数、在职、暂停、离职等统计信息
- **Excel导入导出**: 支持批量导入导出工人数据

## 使用流程

### 分判商登录
1. 访问 `/login` 页面
2. 直接输入用户名和密码（系统会自动识别角色）
3. 使用以下任一测试账号登录：

| 用户名 | 密码 | 公司名称 | 角色 |
|--------|------|----------|------|
| `bjadmin` | `123456` | 北京建筑公司 | 分判商 |
| `shadmin` | `123456` | 上海建设集团 | 分判商 |
| `gzadmin` | `123456` | 广州工程公司 | 分判商 |
| `szadmin` | `123456` | 深圳建筑集团 | 分判商 |
| `cdadmin` | `123456` | 成都建设公司 | 分判商 |

4. 登录成功后自动跳转到工人管理页面

### 管理员登录
- **管理员账号**（系统自动识别为管理员角色）：

| 用户名 | 密码 | 说明 | 角色 |
|--------|------|------|------|
| `admin` | `123456` | 系统管理员 | 管理员 |
| `superadmin` | `super123` | 超级管理员 | 管理员 |
| `manager1` | `mgr123` | 项目经理1 | 管理员 |
| `manager2` | `mgr456` | 项目经理2 | 管理员 |
| `system` | `sys123` | 系统账号 | 管理员 |

**登录后跳转**: `/dashboard` (系统概览页面)

### 工人信息管理
1. **新增工人**: 点击"新增工人"按钮，填写工人详细信息
2. **编辑工人**: 在工人列表中点击编辑按钮修改信息
3. **删除工人**: 点击删除按钮移除工人记录
4. **状态管理**: 可以启用/暂停工人状态
5. **密码重置**: 为工人重置登录密码

### 数据导入导出
1. **下载模板**: 点击"下载模板"获取Excel导入模板
2. **Excel导入**: 使用"Excel导入"功能批量导入工人数据
3. **数据导出**: 支持导出全部或选中的工人数据

## 技术特性

### 权限控制
- 分判商只能查看和管理自己下属的工人
- 数据隔离，确保信息安全
- 基于角色的访问控制

### 数据验证
- 必填字段验证
- 身份证号格式验证
- 邮箱格式验证
- 手机号格式验证

### 用户体验
- 响应式设计，支持移动端访问
- 实时数据更新
- 友好的错误提示
- 批量操作支持

## 页面功能详解

### 工人管理页面 (`/distributor/workers`)

#### 页面布局
- **顶部 Header**: 显示系统名称、当前时间、分判商用户名和退出登录选项
- **左侧侧边栏**: 包含"工人管理"菜单项
- **内容区域**: 显示工人信息表格、筛选器和操作按钮

#### 主要功能

##### 1. 工人信息表格
- **显示内容**：
  - 工号
  - 姓名
  - 性别
  - 身份证号
  - 实体卡ID
  - 所属工地（分判商服务的工地）
  - 联系电话
  - 状态（在职、暂停、离职）
  - 操作（编辑、删除）

##### 2. 筛选与搜索
- **搜索框**: 可以通过姓名、工号、身份证号码或实体卡ID搜索工人
- **状态筛选**: 按"在职"、"暂停"或"离职"状态筛选工人
- **工地筛选**: 按分判商所服务的工地筛选工人
- **清除筛选**: 一键清除所有筛选条件

##### 3. 操作按钮
- **新增工人**:
  - 点击"新增工人"按钮，弹出表单
  - 填写工号、姓名、性别、出生日期、身份证号、实体卡ID、所属工地、联系电话、WhatsApp、邮箱和状态
  - 所属工地只能选择该分判商关联的工地
  - 提交后新增工人信息

- **编辑工人**:
  - 在表格的"操作"列中点击"编辑"图标
  - 弹出预填充工人信息的表单，可修改各项信息
  - 提交后更新工人信息

- **删除工人**:
  - 在表格的"操作"列中点击"删除"图标
  - 弹出确认对话框，确认后删除工人记录

- **下载模板**:
  - 点击"下载模板"按钮，下载用于批量导入工人信息的Excel模板

- **导入工人**:
  - 点击"导入工人"按钮，选择Excel文件进行批量导入
  - 系统将验证导入数据，并只导入属于当前分判商的工人信息

- **导出工人**:
  - 点击"导出工人"按钮，将当前筛选条件下的工人信息导出为Excel文件

## 权限与数据隔离

- 每个分判商登录后，只能查看和管理自己下属的工人信息
- 无法访问其他分判商或管理员的数据
- 所属工地选择框中，也只显示该分判商关联的工地

## 退出登录

- 点击顶部 Header 右侧的用户名，在下拉菜单中选择"退出登录"
- 退出后将返回统一登录页面

## 注意事项

1. **数据安全**: 请妥善保管登录凭据，不要在公共场所登录
2. **数据备份**: 建议定期导出重要数据作为备份
3. **网络要求**: 确保网络连接稳定，避免数据丢失
4. **浏览器兼容**: 建议使用现代浏览器（Chrome、Firefox、Safari、Edge）
5. **数据格式**: 导入Excel文件时，请严格按照模板格式填写数据

## 技术支持

如遇到技术问题，请联系系统管理员或技术支持团队。